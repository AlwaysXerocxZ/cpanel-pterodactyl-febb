<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Cloud Panel — Create Panel</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #4a6bff;
            --secondary-color: #f8f9fa;
            --accent-color: #3a56d4;
            --text-color: #2d3748;
            --light-text: #718096;
            --white: #ffffff;
            --success-color: #48bb78;
            --warning-color: #ed8936;
            --error-color: #f56565;
            --shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            --transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        *{box-sizing:border-box;margin:0;padding:0}
        html,body{height:100%}
        body{
            font-family:'Poppins',sans-serif;
            background: linear-gradient(-45deg,#e0f2fe,#f0fdf4,#eff6ff,#f5f3ff);
            background-size:400% 400%;
            animation: gradientBG 12s ease infinite;
            color:var(--text-color);
            -webkit-font-smoothing:antialiased;
            -moz-osx-font-smoothing:grayscale;
            overflow-x:hidden;
            min-height:100vh;
            display:flex;
            align-items:center;
            justify-content:center;
            padding:20px;
        }

        @keyframes gradientBG{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

        /* Clouds */
        .cloud-container{position:fixed;top:0;left:0;width:100%;height:250px;pointer-events:none;overflow:hidden;z-index:0}
        .cloud{position:absolute;background:#fff;border-radius:50%;opacity:.9;filter:blur(14px);animation:floatCloud linear infinite;z-index:0}
        @keyframes floatCloud {
            0% { transform: translateX(-200px) translateY(0); }
            50% { transform: translateX(calc(50vw - 50px)) translateY(-12px); }
            100% { transform: translateX(calc(100vw + 200px)) translateY(0); }
        }

        /* Layout */
        .wrap {
            width:100%;
            max-width:1100px;
            z-index:2;
            position:relative;
        }

        /* Security Screen */
        .security-screen {
            display:flex;
            align-items:center;
            justify-content:center;
            min-height:70vh;
        }

        .security-box {
            background: rgba(255,255,255,0.98);
            border-radius: 18px;
            padding: 2.2rem;
            box-shadow: 0 20px 40px rgba(6,11,34,0.08);
            width:100%;
            max-width:640px;
            text-align:center;
            border:1px solid rgba(0,0,0,0.04);
            position:relative;
            overflow:hidden;
            backdrop-filter: blur(6px);
            animation:fadeInUp 0.7s ease;
        }

        .security-box h1{color:var(--primary-color);font-size:1.9rem;margin-bottom:.6rem;font-weight:600;display:inline-block}
        .security-box p{color:var(--light-text);margin-bottom:1.4rem}

        .form-group{margin-bottom:1.4rem;position:relative; text-align:left;}
        label{display:block;margin-bottom:.5rem;color:var(--text-color);font-weight:500;font-size:.95rem}
        .form-control{
            width:100%;
            padding: .85rem 1.1rem;
            border-radius:10px;
            border:2px solid #e6eefc;
            font-size:1rem;
            transition:var(--transition);
            background:rgba(255,255,255,0.9);
            box-shadow:0 6px 18px rgba(13,38,100,0.03);
        }
        .form-control:focus{outline:none;border-color:var(--primary-color);box-shadow:0 8px 24px rgba(74,107,255,0.12)}

        .password-toggle{position:absolute;right:12px;top:36px;background:none;border:none;cursor:pointer;color:var(--light-text);width:36px;height:36px;border-radius:50%}
        .btn{
            display:inline-flex;align-items:center;justify-content:center;gap:10px;
            background:var(--primary-color);color:var(--white);border:none;padding:0.95rem 1.4rem;border-radius:10px;font-weight:600;cursor:pointer;
            box-shadow:0 8px 30px rgba(74,107,255,0.18);transition:var(--transition)
        }
        .btn:hover{transform:translateY(-3px);background:var(--accent-color)}

        /* Main panel */
        .panel {
            background: linear-gradient(180deg, rgba(255,255,255,0.92), rgba(255,255,255,0.96));
            border-radius: 18px;
            padding: 2.2rem;
            box-shadow: 0 30px 60px rgba(13,38,100,0.06);
            border:1px solid rgba(0,0,0,0.04);
            width:100%;
            max-width:980px;
            margin: 0 auto;
            text-align:left;
            overflow:hidden;
            animation:fadeInUp 0.7s ease;
        }

        .panel-header{text-align:center;margin-bottom:1.4rem}
        .panel-header h1{color:var(--primary-color);font-size:2.4rem;margin-bottom:.2rem}
        .panel-header p{color:var(--light-text);font-size:1rem}

        .create-form {display:grid;grid-template-columns:1fr 360px;gap:1.2rem;align-items:start}
        @media (max-width:900px){ .create-form{grid-template-columns:1fr;}}
        .left {
            padding:1rem;
            border-radius:12px;
        }
        .right {
            background: linear-gradient(180deg, rgba(240,244,255,0.7), rgba(248,250,255,0.9));
            padding:1rem;
            border-radius:12px;
            border:1px solid rgba(74,107,255,0.06);
            min-height:250px;
        }

        .resource-options {display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:12px;margin-top:.6rem}
        .resource-option {
            background:var(--white);border-radius:10px;padding:12px;border:1px solid #eef4ff;cursor:pointer;box-shadow:0 8px 20px rgba(11,34,80,0.02);
            transition:var(--transition);text-align:center;
        }
        .resource-option h3{font-size:1rem;color:var(--primary-color);margin-bottom:.4rem}
        .resource-option .specs{font-size:.82rem;color:var(--light-text)}
        .resource-option:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(11,34,80,0.06)}
        .resource-option.selected{border-color:var(--primary-color);background:#f0f4ff;box-shadow:0 0 0 4px rgba(74,107,255,0.06) ;transform:translateY(-6px)}

        .credentials {margin-top:12px;background:#f7fbff;padding:12px;border-radius:10px;border:1px solid rgba(74,107,255,0.06)}
        .credential-item{display:flex;align-items:center;gap:10px;padding:8px;border-radius:8px;background:var(--white);margin-bottom:8px;box-shadow:0 6px 18px rgba(11,34,80,0.03)}
        .credential-item strong{min-width:90px;color:var(--text-color);font-weight:600}
        .credential-item span{flex:1;word-break:break-all;color:var(--light-text)}
        .copy-btn{background:var(--secondary-color);border:none;padding:.5rem;border-radius:8px;cursor:pointer;color:var(--light-text)}

        .loader{display:none;text-align:center;margin-top:1rem}
        .loader.active{display:block}
        .spinner{width:54px;height:54px;border:5px solid #f3f3f3;border-top:5px solid var(--primary-color);border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 12px;position:relative}
        @keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}

        .toast{position:fixed;right:22px;bottom:22px;background:var(--text-color);color:#fff;padding:12px 16px;border-radius:10px;box-shadow:0 10px 30px rgba(0,0,0,0.12);transform:translateY(80px);opacity:0;transition:var(--transition);z-index:999}
        .toast.show{transform:translateY(0);opacity:1}
        .toast.success{background:var(--success-color)}
        .toast.error{background:var(--error-color)}

        /* animations */
        @keyframes fadeInUp{from{opacity:0;transform:translateY(18px)}to{opacity:1;transform:translateY(0)}}

        /* responsive tweaks */
        @media (max-width:540px){
            .security-box{padding:1.2rem}
            .panel{padding:1.2rem}
            .panel-header h1{font-size:1.6rem}
        }
    </style>
</head>
<body>
    <!-- clouds -->
    <div class="cloud-container" id="cloudContainer"></div>

    <div class="wrap">
        <!-- Security Screen (same behavior as before) -->
        <div class="security-screen" id="securityScreen">
            <div class="security-box" id="securityBox">
                <h1><i class="fas fa-key"></i> Access Portal</h1>
                <p>Enter your secure access key to continue</p>
                <form id="securityForm">
                    <div class="form-group">
                        <label for="securityKey">Access Key</label>
                        <input type="password" id="securityKey" class="form-control" placeholder="Enter your access key" required>
                        <button type="button" class="password-toggle" id="togglePassword" aria-label="toggle password">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <button type="submit" class="btn" id="unlockBtn"><i class="fas fa-unlock-alt"></i> Unlock Portal</button>
                </form>
            </div>
        </div>

        <!-- Main Full-Screen Create Panel -->
        <div id="mainContent" style="display:none;">
            <div class="panel">
                <div class="panel-header">
                    <h1><i class="fas fa-cloud"></i> Create Cloud Panel</h1>
                    <p>Create a new user panel with allocated resources — fast & animated.</p>
                </div>

                <div class="create-form">
                    <!-- Left: Form -->
                    <div class="left">
                        <form id="panelForm">
                            <div class="form-group">
                                <label for="username">Username</label>
                                <input id="username" class="form-control" placeholder="Enter username (no spaces)" required />
                            </div>

                            <div style="margin-top:.6rem;">
                                <label>Choose Resource</label>
                                <div class="resource-options" id="resourceOptions"></div>
                            </div>

                            <div style="margin-top:1rem;display:flex;gap:12px;">
                                <button class="btn" id="createBtn" type="submit"><i class="fas fa-cloud-upload-alt"></i> Create Panel</button>
                                <button class="btn" id="resetBtn" type="button" style="background:transparent;color:var(--primary-color);box-shadow:none;border:1px solid rgba(74,107,255,0.12)"><i class="fas fa-eraser"></i> Reset</button>
                            </div>

                            <div class="loader" id="loader" style="margin-top:12px;">
                                <div class="spinner"></div>
                                <p style="color:var(--light-text);text-align:center">Creating your cloud resources...</p>
                            </div>
                        </form>
                    </div>

                    <!-- Right: Result / Info -->
                    <div class="right">
                        <h3 style="margin:0 0 .6rem 0;color:var(--primary-color)">Panel Preview & Credentials</h3>

                        <div class="credentials" id="resultSection" style="display:none">
                            <div class="credential-item">
                                <strong>Username:</strong><span id="resultUsername"></span>
                                <button class="copy-btn" data-target="resultUsername"><i class="far fa-copy"></i></button>
                            </div>
                            <div class="credential-item">
                                <strong>Email:</strong><span id="resultEmail"></span>
                                <button class="copy-btn" data-target="resultEmail"><i class="far fa-copy"></i></button>
                            </div>
                            <div class="credential-item">
                                <strong>Password:</strong><span id="resultPassword"></span>
                                <button class="copy-btn" data-target="resultPassword"><i class="far fa-copy"></i></button>
                            </div>
                            <div class="credential-item">
                                <strong>Panel URL:</strong><span id="panelUrl"></span>
                                <button class="copy-btn" data-target="panelUrl"><i class="far fa-copy"></i></button>
                            </div>

                            <div style="display:flex;gap:8px;margin-top:10px;">
                                <button class="btn" id="loginBtn" style="flex:1"><i class="fas fa-sign-in-alt"></i> Login</button>
                                <button class="btn" id="copyAllBtn" style="flex:1;background:var(--warning-color);box-shadow:0 8px 30px rgba(237,137,54,0.12)"><i class="fas fa-copy"></i> Copy All</button>
                            </div>
                        </div>

                        <div id="infoBox" style="margin-top:12px;color:var(--light-text);font-size:.95rem">
                            <p><strong>Tip:</strong> Username cannot contain spaces. Choose resources that fit your needs.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- toast -->
    <div class="toast" id="toast"></div>

    <script>
        // Config (left intact)
        const config = {
            ACCESS_KEY: "112233", // keep same
            PLTA_KEY: "ptla_OzNNz7sNm4vNaqV8fXaKVL18DMq9QgVryYEnpqoJKey",
            PANEL_DOMAIN: "https://febbjembud.hostsatoruu.biz.id",
            USER_API_ENDPOINT: "https://api.nvidiabotz.xyz/pterodactyl/addpanel"
        };

        // Resource options (same as original)
        const resourceOptions = [
            { name: "1GB", ram: "1000", disk: "1000", cpu: "40" },
            { name: "2GB", ram: "2000", disk: "1000", cpu: "60" },
            { name: "3GB", ram: "3000", disk: "2000", cpu: "80" },
            { name: "4GB", ram: "4000", disk: "2000", cpu: "100" },
            { name: "5GB", ram: "5000", disk: "3000", cpu: "120" },
            { name: "6GB", ram: "6000", disk: "3000", cpu: "140" },
            { name: "7GB", ram: "7000", disk: "4000", cpu: "160" },
            { name: "8GB", ram: "8000", disk: "4000", cpu: "180" },
            { name: "9GB", ram: "9000", disk: "5000", cpu: "200" },
            { name: "10GB", ram: "10000", disk: "5000", cpu: "220" },
            { name: "Unlimited", ram: "0", disk: "0", cpu: "0" }
        ];

        // DOM
        const cloudContainer = document.getElementById('cloudContainer');
        const securityScreen = document.getElementById('securityScreen');
        const securityForm = document.getElementById('securityForm');
        const togglePassword = document.getElementById('togglePassword');
        const mainContent = document.getElementById('mainContent');

        const resourceOptionsContainer = document.getElementById('resourceOptions');
        const panelForm = document.getElementById('panelForm');
        const loader = document.getElementById('loader');
        const resultSection = document.getElementById('resultSection');
        const createBtn = document.getElementById('createBtn');
        const resetBtn = document.getElementById('resetBtn');
        const loginBtn = document.getElementById('loginBtn');
        const copyAllBtn = document.getElementById('copyAllBtn');

        let selectedResources = resourceOptions[0];

        // Create animated clouds
        function createClouds(){
            const cloudCount = 6;
            for(let i=0;i<cloudCount;i++){
                const c = document.createElement('div');
                c.className = 'cloud';
                const size = Math.random()*120 + 60;
                const top = Math.random()*120;
                const dur = Math.random()*60 + 40;
                const delay = Math.random()*-60;
                c.style.width = size + 'px';
                c.style.height = (size*0.6) + 'px';
                c.style.top = top + 'px';
                c.style.left = (-Math.random()*300) + 'px';
                c.style.animationDuration = dur + 's';
                c.style.animationDelay = delay + 's';
                cloudContainer.appendChild(c);
            }
        }

        // Generate resource options UI
        function generateResourceOptions(){
            resourceOptionsContainer.innerHTML = '';
            resourceOptions.forEach((opt, idx) => {
                const el = document.createElement('div');
                el.className = 'resource-option' + (idx === 0 ? ' selected' : '');
                el.innerHTML = `<h3>${opt.name}</h3><div class="specs">RAM: ${opt.ram}MB<br>Disk: ${opt.disk}MB<br>CPU: ${opt.cpu}%</div>`;
                el.addEventListener('click', () => {
                    document.querySelectorAll('.resource-option').forEach(x=>x.classList.remove('selected'));
                    el.classList.add('selected');
                    selectedResources = opt;
                });
                resourceOptionsContainer.appendChild(el);
            });
        }

        // Security toggle password
        togglePassword.addEventListener('click', () => {
            const inp = document.getElementById('securityKey');
            const type = inp.getAttribute('type') === 'password' ? 'text' : 'password';
            inp.setAttribute('type', type);
            const icon = togglePassword.querySelector('i');
            icon.classList.toggle('fa-eye');
            icon.classList.toggle('fa-eye-slash');
        });

        // Show toast
        const toast = document.getElementById('toast');
        function showToast(msg, type='success'){
            toast.textContent = '';
            const i = document.createElement('i');
            i.className = 'fas ' + (type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle');
            i.style.marginRight = '8px';
            toast.appendChild(i);
            toast.appendChild(document.createTextNode(msg));
            toast.className = 'toast show ' + (type === 'success' ? 'success' : 'error');
            setTimeout(()=>{toast.className = 'toast'}, 3000);
        }

        // Security check (same logic)
        securityForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const entered = document.getElementById('securityKey').value.trim();
            if(entered === config.ACCESS_KEY){
                // animate out and show main
                document.getElementById('securityBox').classList.add('hidden');
                setTimeout(() => {
                    securityScreen.style.display = 'none';
                    mainContent.style.display = 'block';
                    generateResourceOptions();
                    showToast('Access granted!', 'success');
                }, 300);
            } else {
                showToast('Invalid access key', 'error');
                const box = document.getElementById('securityBox');
                box.style.animation = 'shake 0.5s';
                setTimeout(()=>box.style.animation='',500);
            }
        });

        // Create panel submit
        panelForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const username = (document.getElementById('username').value || '').trim();
            if(!username){
                showToast('Please enter a username', 'error');
                return;
            }
            if(username.includes(' ')){
                showToast('Username cannot contain spaces', 'error');
                return;
            }

            // show loader
            loader.classList.add('active');
            createBtn.disabled = true;
            resultSection.style.display = 'none';

            try {
                const apiUrl = new URL(config.USER_API_ENDPOINT);
                apiUrl.searchParams.append('domain', config.PANEL_DOMAIN);
                apiUrl.searchParams.append('plta', config.PLTA_KEY);
                apiUrl.searchParams.append('username', username);
                apiUrl.searchParams.append('disk', selectedResources.disk);
                apiUrl.searchParams.append('cpu', selectedResources.cpu);
                apiUrl.searchParams.append('memory', selectedResources.ram);

                const response = await fetch(apiUrl.toString());
                if(!response.ok) throw new Error('HTTP status ' + response.status);
                const data = await response.json();

                if(data.status){
                    // display result (keeping same keys expected)
                    document.getElementById('resultUsername').textContent = data.credentials.username || username;
                    document.getElementById('resultEmail').textContent = data.credentials.email || `${username}@example.com`;
                    document.getElementById('resultPassword').textContent = data.credentials.password || username;
                    document.getElementById('panelUrl').textContent = config.PANEL_DOMAIN;
                    resultSection.style.display = 'block';
                    showToast('Panel created successfully!', 'success');

                    // set login action
                    loginBtn.onclick = () => { window.open(config.PANEL_DOMAIN + '/auth/login', '_blank'); };
                } else {
                    throw new Error(data.message || 'Unknown API error');
                }
            } catch(err){
                console.error(err);
                showToast('Failed to create panel: ' + err.message, 'error');
            } finally {
                loader.classList.remove('active');
                createBtn.disabled = false;
                if(resultSection.style.display === 'block'){
                    resultSection.scrollIntoView({behavior:'smooth'});
                }
            }
        });

        // Reset
        resetBtn.addEventListener('click', () => {
            panelForm.reset();
            document.querySelectorAll('.resource-option').forEach((el, idx) => {
                el.classList.toggle('selected', idx === 0);
            });
            selectedResources = resourceOptions[0];
            resultSection.style.display = 'none';
            showToast('Form reset', 'success');
        });

        // Copy buttons
        document.addEventListener('click',(e)=>{
            const target = e.target.closest('.copy-btn');
            if(target){
                const id = target.getAttribute('data-target');
                const text = document.getElementById(id).textContent || '';
                if(!text) { showToast('Nothing to copy', 'error'); return; }
                navigator.clipboard.writeText(text).then(()=>{
                    showToast('Copied to clipboard!', 'success');
                    const old = target.innerHTML;
                    target.innerHTML = '<i class="fas fa-check"></i>';
                    setTimeout(()=> target.innerHTML = old, 1600);
                }).catch(()=> showToast('Failed to copy', 'error'));
            }
        });

        // Copy all
        copyAllBtn.addEventListener('click', ()=>{
            const username = document.getElementById('resultUsername').textContent;
            const email = document.getElementById('resultEmail').textContent;
            const password = document.getElementById('resultPassword').textContent;
            const url = document.getElementById('panelUrl').textContent;
            const text = `Username: ${username}\nEmail: ${email}\nPassword: ${password}\nPanel URL: ${url}`;
            navigator.clipboard.writeText(text).then(()=> showToast('All credentials copied!', 'success')).catch(()=> showToast('Failed to copy', 'error'));
        });

        // small shake keyframes injection & init
        (function addShake(){
            const s = document.createElement('style');
            s.textContent = '@keyframes shake{0%,100%{transform:translateX(0)}10%,30%,50%,70%,90%{transform:translateX(-6px)}20%,40%,60%,80%{transform:translateX(6px)}}';
            document.head.appendChild(s);
        })();

        // init UI on DOM ready
        document.addEventListener('DOMContentLoaded', () => {
            createClouds();
            generateResourceOptions();

            // subtle entrance animations
            const els = document.querySelectorAll('.panel, .security-box, .resource-option, .btn');
            els.forEach((el,i) => {
                el.style.opacity = 0;
                el.style.transform = 'translateY(12px)';
                setTimeout(()=>{ el.style.transition = 'opacity .6s ease, transform .6s ease'; el.style.opacity = 1; el.style.transform = 'translateY(0)'; }, 120 + i*30);
            });
        });
    </script>
</body>
</html>